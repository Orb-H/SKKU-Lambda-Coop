<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SKKoin Administration Page</title>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

  <!-- update the version number as needed -->
  <script src="/__/firebase/6.2.4/firebase-app.js"></script>
  <!-- include only the Firebase features as you need -->
  <script src="/__/firebase/6.2.4/firebase-auth.js"></script>
  <script src="/__/firebase/6.2.4/firebase-database.js"></script>
  <script src="/__/firebase/6.2.4/firebase-storage.js"></script>
  <!-- initialize the SDK after all desired features are loaded -->
  <script src="/__/firebase/init.js"></script>

  <script type="text/javascript">
    init();

    function init() {
      if (!!firebase.auth().currentUser) {
        console.log("exist");
        loadGifticonContent();
      }
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          console.log("re-authed");
          loadGifticonContent();
        } else {
          console.log("unauth");
          location.href = "/";
        }
      });
    }

    function logout() {
      firebase.auth().signOut().then(function() {
        location.href = "/";
        alert("Successfully logged out");
      }).catch(function(error) {
        console.log(error);
        alert(error);
      });
    }

    function loadGifticonContent() {
      $("#loadGifticon").prop('disabled', true).toggleClass("disabled");
      $("#loadUser").prop('disabled', false).toggleClass("disabled");
      $(".outermost").load('html/gifticon.html');
    }

    function loadUserContent() {
      $("#loadUser").prop('disabled', true).toggleClass("disabled");
      $("#loadGifticon").prop('disabled', false).toggleClass("disabled");
      $(".outermost").load('html/user.html');
    }
  </script>

  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
  <p align=center>
    <button id="loadGifticon" onclick="loadGifticonContent()">기프티콘 관리</button><button id="loadUser" onclick="loadUserContent()" class="disabled">사용자 관리</button><button align=right id="logout" onclick="logout()">로그아웃</button>
    <br />
    무언가 찾고자 할 때에는 Ctrl+F를 이용하는 것이 편리합니다.
  </p>
  <div class="outermost">
  </div>
</body>

</html>
